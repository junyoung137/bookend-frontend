/* styles/themes.css */

/* ============================================
   기본 테마: Forest Calm (자연 몰입형)
   ============================================ */
.theme-default {
  /* 배경 색상 */
  --bg-primary: #e8f5e3;
  --bg-secondary: #f0f9ec;
  --bg-tertiary: #d8ead3;
  
  /* Glass 효과 */
  --glass-bg: rgba(255, 255, 255, 0.65);
  --glass-border: rgba(255, 255, 255, 0.4);
  --glass-hover: rgba(255, 255, 255, 0.75);
  
  /* 카드/패널 */
  --card-bg: rgba(250, 252, 249, 0.7);
  --card-hover: rgba(255, 255, 255, 0.85);
  
  /* 포인트 색상 */
  --accent-primary: #4a7c59;
  --accent-secondary: #6b9d77;
  --accent-tertiary: #8ab892;
  --accent-light: rgba(74, 124, 89, 0.1);
  
  /* 텍스트 */
  --text-primary: #1a2e1a;
  --text-secondary: #3d5940;
  --text-tertiary: #6b8a6e;
  
  /* 섀도우 */
  --shadow-glass: 0 8px 32px 0 rgba(74, 124, 89, 0.15);
  --shadow-hover: 0 12px 40px 0 rgba(74, 124, 89, 0.2);
  --shadow-soft: 0 2px 20px rgba(74, 124, 89, 0.08);
  
  /* 글로우 */
  --glow-color: rgba(107, 157, 119, 0.3);
  --glow-strong: rgba(74, 124, 89, 0.4);
  
  /* ✅ 패널 음영 CSS 변수 - 다크와 동일하게 강화 */
  --sidebar-shadow: 4px 0 24px -4px rgba(0, 0, 0, 0.4), 2px 0 12px -2px rgba(139, 92, 246, 0.2);
  --rightpanel-shadow: -4px 0 24px -4px rgba(0, 0, 0, 0.4), -2px 0 12px -2px rgba(139, 92, 246, 0.2);
}

/* ============================================
   시즌 테마: Carol Glow (겨울 감성)
   ============================================ */
.theme-carol {
  /* 배경 색상 */
  --bg-primary: #fff4e6;
  --bg-secondary: #fff8f0;
  --bg-tertiary: #ffefd9;
  
  /* Glass 효과 */
  --glass-bg: rgba(255, 252, 248, 0.7);
  --glass-border: rgba(255, 255, 255, 0.5);
  --glass-hover: rgba(255, 252, 248, 0.85);
  
  /* 카드/패널 */
  --card-bg: rgba(255, 249, 244, 0.75);
  --card-hover: rgba(255, 249, 244, 0.9);
  
  /* 포인트 색상 */
  --accent-primary: #c94c4c;
  --accent-secondary: #e0b973;
  --accent-tertiary: #b85a5a;
  --accent-light: rgba(224, 185, 115, 0.15);
  
  /* 텍스트 */
  --text-primary: #3b2f2f;
  --text-secondary: #5a4848;
  --text-tertiary: #7a6565;
  
  /* 섀도우 */
  --shadow-glass: 0 8px 32px 0 rgba(201, 76, 76, 0.12);
  --shadow-hover: 0 12px 40px 0 rgba(224, 185, 115, 0.25);
  --shadow-soft: 0 2px 20px rgba(224, 185, 115, 0.1);
  
  /* 글로우 */
  --glow-color: rgba(224, 185, 115, 0.35);
  --glow-strong: rgba(201, 76, 76, 0.3);
  
  /* ✅ 패널 음영 CSS 변수 - 다크와 동일하게 강화 */
  --sidebar-shadow: 4px 0 24px -4px rgba(0, 0, 0, 0.4), 2px 0 12px -2px rgba(139, 92, 246, 0.2);
  --rightpanel-shadow: -4px 0 24px -4px rgba(0, 0, 0, 0.4), -2px 0 12px -2px rgba(139, 92, 246, 0.2);
}

/* ============================================
   다크 테마: Dark Midnight (밤 작업 모드)
   ============================================ */
.theme-dark {
  /* 배경 색상 - 어둡게 */
  --bg-primary: #1a1f2e;
  --bg-secondary: #252b3a;
  --bg-tertiary: #2f3545;
  
  /* Glass 효과 - 좌우 패널용 어두운 톤 */
  --glass-bg: rgba(26, 31, 46, 0.9);
  --glass-border: rgba(139, 92, 246, 0.25);
  --glass-hover: rgba(37, 43, 58, 0.95);
  
  /* 카드/패널 */
  --card-bg: rgba(31, 38, 54, 0.9);
  --card-hover: rgba(37, 43, 58, 0.95);
  
  /* 포인트 색상 */
  --accent-primary: #8b5cf6;
  --accent-secondary: #06b6d4;
  --accent-tertiary: #a78bfa;
  --accent-light: rgba(139, 92, 246, 0.15);
  
  /* 텍스트 */
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --text-tertiary: #6b7280;
  
  /* 섀도우 */
  --shadow-glass: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
  --shadow-hover: 0 12px 40px 0 rgba(139, 92, 246, 0.3);
  --shadow-soft: 0 2px 20px rgba(0, 0, 0, 0.3);
  
  /* 글로우 */
  --glow-color: rgba(139, 92, 246, 0.25);
  --glow-strong: rgba(6, 182, 212, 0.3);
  
  /* ✅ 패널 음영 CSS 변수 */
  --sidebar-shadow: 4px 0 24px -4px rgba(0, 0, 0, 0.4), 2px 0 12px -2px rgba(139, 92, 246, 0.2);
  --rightpanel-shadow: -4px 0 24px -4px rgba(0, 0, 0, 0.4), -2px 0 12px -2px rgba(139, 92, 246, 0.2);
}

/* ============================================
   ✅ 패널 음영 적용 (CSS 변수 사용)
   ============================================ */
.sidebar-shadow {
  box-shadow: var(--sidebar-shadow) !important;
}

.rightpanel-shadow {
  box-shadow: var(--rightpanel-shadow) !important;
}

/* ============================================
   우측 글쓰기 파트너 패널 - 눈 편한 회색 배경
   ============================================ */
.writing-partner-panel,
.right-panel-bg {
  background: #F8F8F8 !important;
}

/* ============================================
   Glass Morphism 기본 스타일
   ============================================ */
.glass-panel {
  background: var(--glass-bg);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-glass);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-panel:hover {
  background: var(--glass-hover);
  box-shadow: var(--shadow-hover);
  transform: translateY(-1px);
}

.glass-card {
  background: var(--card-bg);
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-soft);
  transition: all 0.3s ease;
}

.glass-card:hover {
  background: var(--card-hover);
  border-color: var(--accent-primary);
  box-shadow: var(--shadow-hover);
}

/* ============================================
   애니메이션
   ============================================ */
@keyframes glow-pulse {
  0%, 100% {
    opacity: 0.4;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.15);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-20px);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.animate-glow-pulse {
  animation: glow-pulse 8s ease-in-out infinite;
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

/* ============================================
   텍스트 & 타이포그래피
   ============================================ */
.editor-prose {
  font-size: clamp(1.0625rem, 1rem + 0.3vw, 1.1875rem);
  line-height: 1.85;
  letter-spacing: -0.015em;
  word-break: keep-all;
  color: var(--text-primary);
  font-weight: 400;
  transition: color 0.5s ease;
}

.theme-carol .editor-prose {
  line-height: 1.9;
  text-shadow: 0 0 1px rgba(224, 185, 115, 0.1);
}

.theme-dark .editor-prose {
  line-height: 1.9;
  color: #e5e7eb;
}

/* ============================================
   선택 영역
   ============================================ */
.theme-default ::selection {
  background: rgba(107, 157, 119, 0.3);
  color: inherit;
}

.theme-carol ::selection {
  background: rgba(224, 185, 115, 0.4);
  color: inherit;
}

.theme-dark ::selection {
  background: rgba(139, 92, 246, 0.35);
  color: inherit;
}

/* ============================================
   스크롤바
   ============================================ */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

.theme-default::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.theme-carol::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.theme-dark::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #8b5cf6, #06b6d4);
  border-radius: 10px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--accent-primary);
}

.theme-dark::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #7c3aed, #0891b2);
}

/* ============================================
   버튼 스타일
   ============================================ */
.btn-glass {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.btn-glass:hover {
  background: var(--glass-hover);
  border-color: var(--accent-primary);
  box-shadow: var(--shadow-soft);
  transform: translateY(-2px);
}

.btn-glass:active {
  transform: translateY(0);
}

/* ============================================
   입력 필드
   ============================================ */
.input-glass {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.input-glass:focus {
  outline: none;
  border-color: var(--accent-primary);
  background: var(--glass-hover);
  box-shadow: 0 0 0 3px var(--accent-light);
}

/* ============================================
   헤더 Glass 스타일 - 모든 테마 통일
   ============================================ */
.header-glass {
  background: rgba(255, 255, 255, 0.98) !important;
  backdrop-filter: blur(32px) saturate(200%) !important;
  -webkit-backdrop-filter: blur(32px) saturate(200%) !important;
  border-bottom: 1px solid rgba(200, 200, 200, 0.4);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  z-index: 100;
}

/* 헤더 내부 텍스트 어둡게 (모든 테마) - Settings 아이콘 제외 */
.header-glass span,
.header-glass .text-gray-600 {
  color: #2d2d2d !important;
}

/* ✅ Settings 아이콘만 더 진하게 */
.header-glass button[title="설정"] svg {
  color: #1a1a1a !important;
  stroke-width: 2.5;
}

/* 헤더 버튼 호버 효과 (모든 테마 통일) */
.header-glass button {
  transition: background-color 0.2s ease;
}

.header-glass button:hover {
  background: rgba(0, 0, 0, 0.05) !important;
}

/* ============================================
   몰입 모드
   ============================================ */
.focus-mode .glass-panel {
  opacity: 0.5;
  transition: opacity 0.5s ease;
}

.focus-mode .glass-panel:hover {
  opacity: 1;
}

/* ============================================
   중앙 에디터 영역 - 종이 느낌 (모든 테마 동일한 배경색)
   ============================================ */

/* ✅ 기본 테마: 따뜻한 아이보리 종이 */
.theme-default .editor-paper {
  background: #FFF9F0;
  box-shadow: 
    0 2px 8px rgba(74, 124, 89, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(74, 124, 89, 0.12);
}

.theme-default .editor-paper:hover {
  box-shadow: 
    0 4px 16px rgba(74, 124, 89, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.95);
}

/* ✅ 캐롤 테마: 따뜻한 아이보리 종이 */
.theme-carol .editor-paper {
  background: #FFF9F0;
  box-shadow: 
    0 2px 10px rgba(201, 76, 76, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(224, 185, 115, 0.2);
}

.theme-carol .editor-paper:hover {
  box-shadow: 
    0 4px 18px rgba(201, 76, 76, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

/* ✅ 다크 테마: 따뜻한 아이보리 종이 (다크모드에서도 밝게 유지) */
.theme-dark .editor-paper {
  background: #FFF9F0;
  box-shadow: 
    0 4px 20px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(139, 92, 246, 0.2);
}

.theme-dark .editor-paper:hover {
  box-shadow: 
    0 6px 28px rgba(0, 0, 0, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
}

/* 종이 질감 효과 */
.editor-paper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='paperNoise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23paperNoise)' /%3E%3C/svg%3E");
  opacity: 0.015;
  pointer-events: none;
  border-radius: inherit;
}

/* 에디터 내부 여백 및 타이포그래피 */
.editor-paper .editor-prose {
  color: var(--text-primary);
  position: relative;
  z-index: 1;
}

/* 다크 테마 에디터 내부 텍스트 (밝은 종이에 어두운 텍스트) */
.theme-dark .editor-paper .editor-prose {
  color: #2d2d2d;
}

.theme-dark .editor-paper h1,
.theme-dark .editor-paper h2,
.theme-dark .editor-paper h3 {
  color: #1a1a1a;
}

/* 다크 테마 플레이스홀더 */
.theme-dark .editor-paper .editor-prose[contenteditable]:empty:before {
  color: #6b7280;
}